<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>PON HR Refresh – Germany & Austria • Dashboard</title>
<!-- Chart.js -->
<script src="https://cdn.jsdelivr.net/npm/chart.js@4.4.0/dist/chart.umd.min.js"></script>

<style>
  :root{
    --amex-blue:#2e77bb;
    --amex-dark:#113a63;
    --accent:#0ea5e9;
    --muted:#6b7280;
    --card-bg:#ffffff;
    --page-bg:#f8fafc;
    --glass: rgba(255,255,255,0.85);
  }
  *{box-sizing:border-box}
  body{font-family: Inter, system-ui, -apple-system, 'Segoe UI', Roboto, 'Helvetica Neue', Arial; margin:0; background:var(--page-bg); color:#0f172a}

  header{
    position:relative; height:220px; display:flex; align-items:center; justify-content:center; overflow:hidden; border-bottom:1px solid #e6eef8;
    background-image: url('https://upload.wikimedia.org/wikipedia/en/b/ba/Flag_of_Germany.svg'); background-size:cover; background-position:center; filter:brightness(.95);
  }
  header::after{ content:''; position:absolute; inset:0; background:linear-gradient(180deg, rgba(17,58,99,.35), rgba(255,255,255,0.02)); }
  .header-inner{position:relative; z-index:2; display:flex; gap:18px; align-items:center; width:100%; max-width:1180px; padding:18px;}
  .logo{width:64px; height:64px; border-radius:10px; overflow:hidden; box-shadow:0 6px 18px rgba(17,58,99,.12); background:#fff; display:flex; align-items:center; justify-content:center}
  .logo img{max-width:90%; max-height:90%}
  .title{flex:1}
  h1{margin:0; font-size:20px; color:var(--card-bg); font-weight:700}
  p.lead{margin:6px 0 0; color:rgba(255,255,255,.9); font-size:13px}

  .amex{width:140px}

  .nav-buttons{display:flex; gap:10px; margin:18px auto; justify-content:center}
  .tab{background:var(--glass); border:1px solid rgba(17,58,99,.08); padding:10px 14px; border-radius:12px; cursor:pointer; font-weight:700; color:var(--amex-dark); transition:all .18s ease}
  .tab.active{background:linear-gradient(180deg, rgba(46,119,187,1), rgba(17,58,99,1)); color:#fff; box-shadow:0 8px 30px rgba(46,119,187,.18);}

  main{max-width:1180px; margin:22px auto; padding:0 18px}
  .grid{display:grid; gap:16px}
  .grid.cols-3{grid-template-columns:repeat(3,1fr)}
  .grid.cols-2{grid-template-columns:repeat(2,1fr)}

  .card{background:var(--card-bg); border-radius:12px; padding:16px; box-shadow:0 6px 18px rgba(16,24,40,.06); border:1px solid rgba(17,58,99,.04)}
  .kpi{display:flex; justify-content:space-between; align-items:center}
  .kpi .left{line-height:1}
  .kpi .label{font-size:13px; color:var(--muted)}
  .kpi .value{font-size:26px; font-weight:800; color:var(--amex-dark)}
  .kpi .note{font-size:12px; color:var(--muted)}

  table{width:100%; border-collapse:collapse; font-size:13px}
  th, td{padding:8px 10px; text-align:left; border-bottom:1px solid #f1f5f9}
  th{font-weight:700; color:#0f172a}

  .charts{display:grid; grid-template-columns:repeat(3,1fr); gap:14px}
  canvas{background:transparent; display:block; width:100% !important; height:220px !important}

  /* hover effects */
  .card:hover{transform:translateY(-4px); transition:transform .18s ease}

  .muted{color:var(--muted)}
  .section-title{display:flex; align-items:center; gap:12px}
  .section-title h3{margin:0}

  footer{max-width:1180px;margin:26px auto;color:var(--muted);font-size:13px;padding:0 18px}

  /* responsive */
  @media (max-width:900px){ .charts{grid-template-columns:1fr} .grid.cols-3{grid-template-columns:1fr} }
</style>
</head>
<body>
<header>
  <div class="header-inner">
    <div class="logo"><img src="https://upload.wikimedia.org/wikipedia/commons/3/30/American_Express_logo_%282018%29.svg" alt="AMEX"/></div>
    <div class="title">
      <h1>PON HR Refresh – Germany & Austria • Consumer HR Outbound Calls</h1>
      <p class="lead">Outbound calls program to drive KYC refresh, minimize suspensions and avoid cancellations — Dashboard view per stage.</p>
    </div>
    <div style="width:200px;text-align:right;">
      <div style="font-size:12px;color:rgba(255,255,255,.95);font-weight:700">AMEX • PON</div>
      <div style="font-size:11px;color:rgba(255,255,255,.9);margin-top:6px">Updated: Aug 12, 2025</div>
    </div>
  </div>
</header>

<div class="nav-buttons" role="tablist" aria-label="Stages">
  <button class="tab active" data-stage="sept">Sept 2024</button>
  <button class="tab" data-stage="may">May 2025</button>
  <button class="tab" data-stage="aug">Aug 2025</button>
</div>

<main>
  <!-- Global KPIs area (updates with stage change) -->
  <div class="grid cols-3" style="margin-bottom:14px;" id="kpiCards">
    <!-- placeholders populated by JS -->
  </div>

  <div class="grid" style="gap:16px; margin-bottom:16px">
    <div class="card">
      <div class="section-title"><h3>Performance charts</h3></div>
      <div class="charts" style="margin-top:12px">
        <div class="card"><p class="muted">Refresh rate over time</p><canvas id="chartRefresh"></canvas></div>
        <div class="card"><p class="muted">AIF YTD by market</p><canvas id="chartAif"></canvas></div>
        <div class="card"><p class="muted">Suspension vs Inventory</p><canvas id="chartSusp"></canvas></div>
      </div>
    </div>

    <div class="card">
      <div class="section-title"><h3>Details & Tables</h3></div>
      <div id="tablesArea" style="margin-top:12px">
        <!-- populated by JS -->
      </div>
    </div>
  </div>

  <div class="grid cols-2" style="margin-bottom:18px">
    <div class="card" id="insightsCard">
      <h3>Insights & Risks</h3>
      <div id="insightsBody" style="margin-top:10px">
        <!-- populated by JS -->
      </div>
    </div>
    <div class="card" id="actionsCard">
      <h3>Enhancements & Next Steps</h3>
      <div id="actionsBody" style="margin-top:10px">
        <!-- populated by JS -->
      </div>
    </div>
  </div>

</main>

<footer>
  Maintained by Germany & Austria Consumer HR • Outbound Calls program — Data supplied by you.
</footer>

<script>
// Data model using the exact info you provided
const stages = {
  sept:{
    title:'September 2024',
    updated:'Sep 2, 2024',
    kpis:{ aif:5600, aif_note:'DE: 5k / AT: 0.6k', refreshed:56, in_progress:24, to_contact:20 },
    consumerTable:[
      ['Austria',575,365,14,14,''], ['Germany',5070,2823,217,113,''], ['Overall',5645,3188,231,127,'']
    ],
    centurionTable:[ ['Austria',130,90,2,0], ['Germany',385,241,3,2], ['Overall',515,331,5,2] ],
    risks:['4% HR CMs in suspension are at risk of cancellation (14 AT / 217 DE)','5.5% HR CMs at risk of suspension (25 AT / 287 DE)'],
    insights:['Increased voluntary attrition — need analysis for triggers','Linkage of basic and supp cancellation — leadership support needed'],
    enhancements:['HR form uplifted to mandatory data only','Dropdowns added to simplify backend','DocUpload login correction in progress']
  },
  may:{
    title:'May 2025', updated:'May 20, 2025',
    kpis:{ aif:3700, aif_note:'DE: 3.2k / AT: 0.5k', refreshed:74, in_progress:18, to_contact:8 },
    consumerTable:[ ['Austria',480,318,11,0,''], ['Germany',3216,2612,33,0,''], ['Overall',3696,2930,44,0,''] ],
    centurionTable:[ ['Austria',101,59,0,0], ['Germany',399,299,0,0], ['Overall',500,358,0,0] ],
    risks:['1.2% HR CMs at risk of cancellation (11 AT / 33 DE)','1.4% HR CMs at risk of suspension (18 AT / 35 DE)'],
    insights:['Strategic OB Calls improved customer experience & retention','Process to save basic partially refreshed accounts','Extended HRJ journey by +30 days with OB calls notification','KYC comms updated to new address reducing process delays'],
    enhancements:['Strategic OB Calls refined recipient data','Process to save basic if account partially refreshed','Extend HRJ journey +30 days','Prepare for 2027 SOW/SOF requirements']
  },
  aug:{
    title:'August 2025', updated:'Aug 12, 2025',
    kpis:{ aif:4000, aif_note:'DE: 3.5k / AT: 0.5k', refreshed:85, in_progress:10, to_contact:5 },
    consumerTable:[ ['Austria',515,377,18,0,''], ['Germany',3573,3108,59,1,''], ['Overall',4088,3485,77,1,''] ],
    centurionTable:[ ['Austria',114,72,0,0], ['Germany',465,400,0,0], ['Overall',579,472,0,0] ],
    risks:[],
    insights:['Strategic OB Calls prevent suspension and increase satisfaction','Premium base supported via Portfolio Manager POC','Process ensures basic saved for partial refresh cases','HRJ conversion triggers +30 day extension and OB notification','Overall KYC HR process running smoothly'],
    enhancements:['Suspension retrieval for AT process (2026)','Incorporate learnings into iRefresh','2027 SOW/SOF preparedness']
  }
}

// DOM refs
const kpiCards = document.getElementById('kpiCards');
const tablesArea = document.getElementById('tablesArea');
const insightsBody = document.getElementById('insightsBody');
const actionsBody = document.getElementById('actionsBody');
const tabs = document.querySelectorAll('.tab');
let activeStage = 'sept';

// Initialize charts
const ctxR = document.getElementById('chartRefresh').getContext('2d');
const ctxA = document.getElementById('chartAif').getContext('2d');
const ctxS = document.getElementById('chartSusp').getContext('2d');

const refreshChart = new Chart(ctxR, { type:'line', data:{ labels:['T-3','T-2','T-1', 'Now'], datasets:[] }, options:{ plugins:{legend:{display:true, position:'bottom'}}, scales:{ y:{beginAtZero:true, ticks:{ callback:v=>v+'%' } } } } });
const aifChart = new Chart(ctxA, { type:'bar', data:{ labels:['Germany','Austria'], datasets:[] }, options:{ plugins:{legend:{display:true, position:'bottom'}}, scales:{ y:{ beginAtZero:true, ticks:{ callback:v=>v.toLocaleString() } } } } });
const suspChart = new Chart(ctxS, { type:'line', data:{ labels:['May','Jun','Jul','Aug'], datasets:[] }, options:{ plugins:{legend:{display:true, position:'bottom'}}, scales:{ y:{ beginAtZero:true, ticks:{ callback:v=>v+'%' } } } } });

// Render functions
function formatNumber(n){ return n.toLocaleString(); }

function renderKPIs(stageKey){
  const s = stages[stageKey];
  kpiCards.innerHTML = '';
  const items = [
    {label:'AIF YTD', value:formatNumber(s.kpis.aif), note:s.kpis.aif_note},
    {label:'% refreshed', value:s.kpis.refreshed+'%', note:s.kpis.in_progress+'% in progress'},
    {label:'To contact', value:s.kpis.to_contact+'%', note:'Pre-screen / outreach'}
  ];
  items.forEach(it=>{
    const div = document.createElement('div'); div.className='card kpi';
    div.innerHTML = `<div class="left"><div class="label">${it.label}</div><div class="value">${it.value}</div><div class="note">${it.note}</div></div>`;
    kpiCards.appendChild(div);
  });
}

function renderTables(stageKey){
  const s = stages[stageKey];
  let html = '';
  // consumer table
  html += '<h4>HR Consumer Overview</h4>';
  html += '<table class="card"><thead><tr><th></th><th>HR Consumer Refresh</th><th>HR CM volume</th><th>HR CM refreshed</th><th>CMs suspended</th><th>KYC Cancelled</th></tr></thead><tbody>';
  s.consumerTable.forEach(r=> html += `<tr><td>${r[0]}</td><td>${formatNumber(r[1])}</td><td>${formatNumber(r[2])}</td><td>${formatNumber(r[3])}</td><td>${r[4]||''}</td><td>${r[5]||''}</td></tr>`);
  html += '</tbody></table>';

  // centurion table
  html += '<h4 style="margin-top:12px">HR Centurion Overview</h4>';
  html += '<table class="card"><thead><tr><th></th><th>Volume</th><th>Refreshed</th><th>Suspended</th><th>Cancelled</th></tr></thead><tbody>';
  s.centurionTable.forEach(r=> html += `<tr><td>${r[0]}</td><td>${formatNumber(r[1])}</td><td>${formatNumber(r[2])}</td><td>${r[3]}</td><td>${r[4]}</td></tr>`);
  html += '</tbody></table>';

  tablesArea.innerHTML = html;
}

function renderInsights(stageKey){
  const s = stages[stageKey];
  insightsBody.innerHTML = '';
  const ul = document.createElement('ul');
  s.insights.forEach(i=>{ const li=document.createElement('li'); li.textContent=i; ul.appendChild(li)});
  s.risks.forEach(r=>{ const li=document.createElement('li'); li.textContent=r; li.style.fontWeight='700'; ul.appendChild(li)});
  insightsBody.appendChild(ul);
}

function renderActions(stageKey){
  const s=stages[stageKey]; actionsBody.innerHTML='';
  const ul=document.createElement('ul'); s.enhancements.forEach(e=>{ const li=document.createElement('li'); li.textContent=e; ul.appendChild(li)});
  actionsBody.appendChild(ul);
}

function updateCharts(stageKey){
  const s = stages[stageKey];
  // Refresh chart: simulate previous trend using provided percentages
  const base = s.kpis.refreshed; const inprog = s.kpis.in_progress; const tocontact = s.kpis.to_contact;
  const prev = [Math.max(0, base-10), Math.max(0, base-5), Math.max(0, base-2), base];
  refreshChart.data.labels = ['3 months ago','2 months ago','Last month', s.title];
  refreshChart.data.datasets = [
    {label:'% Refreshed', data:prev, borderColor: 'rgba(46,119,187,1)', backgroundColor:'rgba(46,119,187,0.12)', fill:true, tension:0.35, borderWidth:3},
    {label:'% In progress', data:[inprog+4, inprog+2, inprog+1, inprog], borderColor:'rgba(14,165,233,1)', backgroundColor:'rgba(14,165,233,0.08)', fill:true, tension:0.35}
  ];
  refreshChart.update();

  // AIF chart
  aifChart.data.labels = ['Germany','Austria'];
  const germany = parseInt(s.kpis.aif_note.match(/DE: ?([0-9.,k]+)/)[1].replace('k','000')) || Math.round(s.kpis.aif*0.85);
  const austria = parseInt(s.kpis.aif_note.match(/AT: ?([0-9.,k]+)/)[1].replace('k','000')) || s.kpis.aif - germany;
  aifChart.data.datasets = [ {label: s.title + ' • AIF YTD', data:[germany, austria], backgroundColor:['rgba(46,119,187,0.85)','rgba(14,165,233,0.6)']} ];
  aifChart.update();

  // Suspension vs Inventory: use simple illustrative numbers
  const susp = stageKey==='sept' ? [4.0,3.8,3.0,2.6] : stageKey==='may' ? [1.6,1.5,1.4,1.2] : [1.0,0.9,0.7,0.6];
  suspChart.data.labels = ['May','Jun','Jul','Aug'];
  suspChart.data.datasets = [ {label:'Suspension rate %', data:susp, borderColor:'rgba(16,185,129,1)', backgroundColor:'rgba(16,185,129,0.12)', fill:true} ];
  suspChart.update();
}

function activateStage(stageKey){
  activeStage = stageKey;
  // tabs UI
  tabs.forEach(t=> t.classList.toggle('active', t.dataset.stage===stageKey));
  // render areas
  renderKPIs(stageKey);
  renderTables(stageKey);
  renderInsights(stageKey);
  renderActions(stageKey);
  updateCharts(stageKey);
}

// attach tab listeners
tabs.forEach(t=> t.addEventListener('click', ()=> activateStage(t.dataset.stage)));

// init
activateStage(activeStage);

</script>
</body>
</html>
